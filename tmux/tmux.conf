##
# TMUX  configuration
# Some inspirations:
# 
# http://www.hamvocke.com/blog/a-guide-to-customizing-your-tmux-conf/
#
# https://gist.github.com/spicycode/1229612
#
##

# Remap C-a to C-s
unbind C-b
set -g prefix C-s
bind C-a send-prefix


# Use vi mode in Copy mode.
# - Go back to scroll buffer with C-a '['.
# - Select text with 'v', copy text with 'y'
# - Paste text with C-a 'p'
set-window-option -g mode-keys vi
bind-key Escape copy-mode
#bind-key -t vi-copy v begin-selection
#bind-key -t vi-copy y copy-selection
# Update to tmux 2.4
bind-key -T copy-mode-vi 'v' send -X begin-selection
bind-key -T copy-mode-vi 'y' send -X copy-selection
unbind-key p
bind-key p paste-buffer

# Colors
#set-window-option -g window-style 'bg=#181818'
#set-window-option -g window-active-style 'bg=black'
#set-window-option -g pane-active-border-style ''
set -g pane-border-fg blue
set -g pane-active-border-fg brightred

# Invert colors of active window
#set-option -g window-status-current-bg black
#set-option -g window-status-current-fg green

# Increase history buffer size 
set-option -g history-limit 10000


# Mouse handling.
# NOTE: to make copy/paste with mouse work, use 'SHIFT' key on Linux, 'OPTION' on MAC.
set-option -g -q mouse on
set-option -g -q mouse-utf8 on

# Reload key
bind-key r source-file ~/.tmux.conf \; display-message "Configuration reloaded"


# switch panes using Alt-arrow without prefix
# bind -n M-Left select-pane -L
# bind -n M-Right select-pane -R
# bind -n M-Up select-pane -U
# bind -n M-Down select-pane -D
# switch panes using Alt-arrow without prefix
bind -n M-h select-pane -L
bind -n M-l select-pane -R
bind -n M-k select-pane -U
bind -n M-j select-pane -D

# Shift arrow to switch windows
# bind -n S-Left  previous-window
# bind -n S-Right next-window
# Ctrl - Alt h/l to switch windows
bind -n C-M-h  previous-window
bind -n C-M-l next-window


# Prevent tmux window title renaming
set-window-option -g automatic-rename off
set-option -g allow-rename off


#
# See colour### with:
#
# for i in {0..255}; do
#     printf "\x1b[38;5;${i}mcolour${i}\x1b[0m  "
#     r=`expr ${i} % 8`
#     if [ ${r} -eq 7 ]; then echo ""; fi
# done
#

# Make tmux show all 256 colors.
#
# NOTE: need to set env variable TERM:
#
# export TERM=xterm-256color
#
set -g default-terminal "screen-256color"

### Bottom bar
set -g status-position bottom

## Bottom bar colors

# debian 
set -g status-bg colour27

# Mac
# set -g status-bg colour105

set -g status-fg colour10
set -g status-attr dim
set -g status-left ''
set -g status-right '#[fg=colour233, bold]#(hostname) #[fg=colour233,bg=colour241,bold] %d/%m #[fg=colour233,bg=colour245,bold] %H:%M:%S '
set -g status-right-length 50
set -g status-left-length 20

setw -g window-status-current-fg colour81
#setw -g window-status-current-bg colour88
setw -g window-status-current-bg colour0
setw -g window-status-current-attr bold
setw -g window-status-current-format ' #I#[fg=colour250]:#[fg=colour255]#W#[fg=colour46]#F '

setw -g window-status-fg colour108
setw -g window-status-bg colour235
setw -g window-status-attr none
setw -g window-status-format ' #I#[fg=colour237]:#[fg=colour250]#W#[fg=colour244]#F '

setw -g window-status-bell-attr bold
setw -g window-status-bell-fg colour255
setw -g window-status-bell-bg colour1

# The messages {

set -g message-attr bold
set -g message-fg colour232
set -g message-bg colour166

# }
#

# Avoid escape delays (e.g. exiting --INSERT-- mode in vim)
set -s escape-time 50

